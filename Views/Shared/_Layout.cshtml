@using Microsoft.AspNetCore.Identity
@using _.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <!-- plugins:css -->
    <link rel="stylesheet" href="~/vendors/feather/feather.css">
    <link rel="stylesheet" href="~/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="~/vendors/ti-icons/css/themify-icons.css">
    <link rel="stylesheet" href="~/vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/vendors/typicons/typicons.css">
    <link rel="stylesheet" href="~/vendors/simple-line-icons/css/simple-line-icons.css">
    <link rel="stylesheet" href="~/vendors/css/vendor.bundle.base.css">
    <link rel="shortcut icon" href="~/images/logo-prodactive.png" />
    <!-- endinject -->
    @await RenderSectionAsync("Styles", required: false)
    <link rel="stylesheet" href="~/css/Dashboard/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/chatbot.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
</head>
<body>
    @await Html.PartialAsync("_Navbar")
    <div class="container-fluid page-body-wrapper">
        @if (User.Identity != null && User.Identity.IsAuthenticated){
            @await Html.PartialAsync("_Sidebar")
        }   
        <div class="main-panel">
            <div class="content-wrapper">
                @RenderBody()
            </div>
            @await Html.PartialAsync("_Footer")
        </div>
    </div>
    <!-- Chatbot Toggler -->
  <button id="chatbot-toggler">
    <span class="material-symbols-rounded">mode_comment</span>
    <span class="material-symbols-rounded">close</span>
  </button>

  <div class="chatbot-popup">
    <!-- Chatbot Header -->
    <div class="chat-header">
      <div class="header-info">
        <img class="chatbot-logo" src="~/images/robotic.png" alt="Chatbot Logo" width="50" height="50">
        </img>
        <h2 class="logo-text">Chubby</h2>
      </div>
      <button id="close-chatbot" class="material-symbols-rounded">keyboard_arrow_down</button>
    </div>

    <!-- Chatbot Body -->
    <div class="chat-body">
      <div class="message bot-message">
        <img class="bot-avatar" src="~/images/robotic.png" alt="Chatbot Logo" width="50" height="50">
        </img>
        <!-- prettier-ignore -->
        <div class="message-text"> Hey there I'm Chubby,  <br />How can I help you today? </div>
      </div>
    </div>

    <!-- Chatbot Footer -->
    <div class="chat-footer">
        <form action="#" class="chat-form">
            <textarea placeholder="Message..." class="message-input" required></textarea>
            <div class="chat-controls">
            <button type="button" id="emoji-picker" class="material-symbols-outlined">sentiment_satisfied</button>
            <div class="file-upload-wrapper">
                <input type="file" accept="image/*" id="file-input" hidden />
                <img src="#" />
                <button type="button" id="file-upload" class="material-symbols-rounded">attach_file</button>
                <button type="button" id="file-cancel" class="material-symbols-rounded">close</button>
            </div>
            <button type="submit" id="send-message" class="material-symbols-rounded">arrow_upward</button>
            </div>
        </form>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <!-- inject:js -->
    <script src="~/js/Dashboard/off-canvas.js"></script>
    <script src="~/js/Dashboard/template.js"></script>
    <script src="~/js/Dashboard/settings.js"></script>
    <script src="~/js/Dashboard/hoverable-collapse.js"></script>
    <script src="~/js/Dashboard/todolist.js"></script>
    <script src="~/js/Dashboard/dashboard.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>
    <script src="~/js/chatbot.js"></script>
    <!-- endinject -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- plugins:js -->
    <script src="~/vendors/js/vendor.bundle.base.js"></script>
    <script src="~/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
    <!-- endinject -->
    @await RenderSectionAsync("Scripts", required: false)
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('click', function(e) {
                console.log(e.target);
            });
        });
    </script>

</body>
</html>
